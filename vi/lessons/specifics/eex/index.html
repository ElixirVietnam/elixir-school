<!DOCTYPE html>

<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link href="http://gmpg.org/xfn/11" rel="profile">

  <meta name="description" content="Giáo trình cho ngôn ngữ lập trình Elixir">
  <meta name="author" content="Sean Callan">

  <meta property="og:url" content="https://elixirschool.com/vi/lessons/specifics/eex/">
  <meta property="og:site_name" content="ElixirSchool">
  <meta property="og:title" content="
  Embedded Elixir (EEx) &middot; Elixir School

">
  <meta property="og:description" content="Giáo trình cho ngôn ngữ lập trình Elixir">
  <meta property="og:image" content="https://elixirschool.com/assets/fb_share.jpg">

  <title>
    
  Embedded Elixir (EEx) &middot; Elixir School


  </title>

  <!-- CSS -->
  <link type="text/css" rel="stylesheet" href="/assets/app.css">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load("C0p07Sw9j7mZnycKDCgPOAyqJR5hhyoQ");
  analytics.page()
  }}();
  </script>

</head>


  
  <body class="theme-custom-purple ">
    <a id="github_ribbon" href="https://github.com/doomspork/elixir_school"><img src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>

    
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Elixir School
        </a>
      </h1>
      <p class="lead">Giáo trình cho ngôn ngữ lập trình Elixir</p>
    </div>

    <nav class="sidebar-nav">
      
      
        
        
        
        
          <div class="sidebar-nav-group basics">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Cơ bản</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/vi/lessons/basics/basics/">Cơ bản</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/vi/lessons/basics/collections/">Các tập dữ liệu</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/vi/lessons/basics/enum/">Enum</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/vi/lessons/basics/pattern-matching/">Pattern matching (so trùng mẫu)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/vi/lessons/basics/control-structures/">Cấu trúc điều khiển</a>
                </div>
              
                <div class="sidebar-nav-item">
                  6. <a class="sidebar-lesson " href="/vi/lessons/basics/functions/">Hàm</a>
                </div>
              
                <div class="sidebar-nav-item">
                  7. <a class="sidebar-lesson " href="/vi/lessons/basics/pipe-operator/">Pipe Operator</a>
                </div>
              
                <div class="sidebar-nav-item">
                  8. <a class="sidebar-lesson " href="/vi/lessons/basics/modules/">Modules</a>
                </div>
              
                <div class="sidebar-nav-item">
                  9. <a class="sidebar-lesson " href="/vi/lessons/basics/mix/">Mix</a>
                </div>
              
                <div class="sidebar-nav-item">
                  10. <a class="sidebar-lesson " href="/vi/lessons/basics/sigils/">Sigils</a>
                </div>
              
                <div class="sidebar-nav-item">
                  11. <a class="sidebar-lesson " href="/vi/lessons/basics/documentation/">Documentation</a>
                </div>
              
                <div class="sidebar-nav-item">
                  12. <a class="sidebar-lesson " href="/vi/lessons/basics/testing/">Testing</a>
                </div>
              
                <div class="sidebar-nav-item">
                  13. <a class="sidebar-lesson " href="/vi/lessons/basics/comprehensions/">Comprehensions</a>
                </div>
              
                <div class="sidebar-nav-item">
                  14. <a class="sidebar-lesson " href="/vi/lessons/basics/strings/">Strings</a>
                </div>
              
                <div class="sidebar-nav-item">
                  15. <a class="sidebar-lesson " href="/vi/lessons/basics/mix-tasks/">Tác vụ Mix tùy biến</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group advanced">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Nâng cao</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/vi/lessons/advanced/erlang/">Erlang Interoperability</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/vi/lessons/advanced/error-handling/">Xử Lý Lỗi</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/vi/lessons/advanced/escripts/">File thực thi</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/vi/lessons/advanced/concurrency/">Xử lý đồng thời</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/vi/lessons/advanced/otp-concurrency/">OTP Concurrency</a>
                </div>
              
                <div class="sidebar-nav-item">
                  6. <a class="sidebar-lesson " href="/vi/lessons/advanced/otp-supervisors/">OTP Supervisors</a>
                </div>
              
                <div class="sidebar-nav-item">
                  7. <a class="sidebar-lesson " href="/vi/lessons/advanced/metaprogramming/">Metaprogramming</a>
                </div>
              
                <div class="sidebar-nav-item">
                  8. <a class="sidebar-lesson " href="/vi/lessons/advanced/umbrella-projects/">Các dự án ô</a>
                </div>
              
                <div class="sidebar-nav-item">
                  9. <a class="sidebar-lesson " href="/vi/lessons/advanced/typespec/">Đặc tả và kiểu</a>
                </div>
              
                <div class="sidebar-nav-item">
                  10. <a class="sidebar-lesson " href="/vi/lessons/advanced/behaviours/">Behaviours</a>
                </div>
              
                <div class="sidebar-nav-item">
                  11. <a class="sidebar-lesson " href="/vi/lessons/advanced/gen-stage/">GenStage</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group specifics">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-down "></i>
              <span>Cụ thể</span>
            </div>
            <div class="sidebar-nav-list" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/vi/lessons/specifics/plug/">Plug</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/vi/lessons/specifics/ecto/">Ecto</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson  active" href="/vi/lessons/specifics/eex/">Embedded Elixir (EEx)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/vi/lessons/specifics/ets/">Erlang Term Storage (ETS)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/vi/lessons/specifics/mnesia/">Mnesia</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group libraries">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Thư viện</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/vi/lessons/libraries/poolboy/">Poolboy</a>
                </div>
              
            </div>
          </div>
        
      
    </nav>

    <p>
      

      
        <a href=" /lessons/specifics/eex/ ">en</a>
      
        <a href=" /jp/lessons/specifics/eex/ ">jp</a>
      
        <a href=" /cn/lessons/specifics/eex/ ">cn</a>
      
        <a href=" /es/lessons/specifics/eex/ ">es</a>
      
        <a href=" /pt/lessons/specifics/eex/ ">pt</a>
      
        <a href=" /vi/lessons/specifics/eex/ ">vi</a>
      
        <a href=" /ru/lessons/specifics/eex/ ">ru</a>
      
        <a href=" /sk/lessons/specifics/eex/ ">sk</a>
      
        <a href=" /fr/lessons/specifics/eex/ ">fr</a>
      
        <a href=" /gr/lessons/specifics/eex/ ">gr</a>
      
        <a href=" /it/lessons/specifics/eex/ ">it</a>
      
        <a href=" /pl/lessons/specifics/eex/ ">pl</a>
      
        <a href=" /my/lessons/specifics/eex/ ">my</a>
      
        <a href=" /no/lessons/specifics/eex/ ">no</a>
      
        <a href=" /ko/lessons/specifics/eex/ ">ko</a>
      
        <a href=" /id/lessons/specifics/eex/ ">id</a>
      
        <a href=" /uk/lessons/specifics/eex/ ">uk</a>
      
        <a href=" /tr/lessons/specifics/eex/ ">tr</a>
      
        <a href=" /bg/lessons/specifics/eex/ ">bg</a>
      
        <a href=" /de/lessons/specifics/eex/ ">de</a>
      
        <a href=" /bn/lessons/specifics/eex/ ">bn</a>
      
    </p>

    <p>&copy; 2017 <a href="https://github.com/doomspork">Sean Callan</a></p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Embedded Elixir (EEx)</h1>
  <p>Như ERB của Ruby hay JSPs của Java, Elixir cũng có EEx hãy Embedded Elixir (tạm dịch: Elixir nhúng). Với EEx ta có thể nhúng hay thực thi lệnh Elixir trong string.</p>

<h2>Mục lục</h2>
<div id="toc"></div>

<h2 id="api">API</h2>

<p>API của EEx hỗ trợ làm việc trực tiếp với string hay tập tin. API này được chia ra thành ba phần chính: Tính toán đơn giản, định nghĩa hàm và biên dịch thành cây AST.</p>

<h3 id="tnh-ton">Tính toán</h3>

<p>Dùng hàm <code class="highlighter-rouge">eval_string/3</code> hay <code class="highlighter-rouge">eval_file/2</code> ta có thể thực hiện một lệnh tính toán trong một string hay nội dụng của file. Đây là API đơn giản nhất nhưng chậm nhất bởi code được tính toán mà không thông qua biên dịch.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">EEx</span><span class="o">.</span><span class="n">eval_string</span> <span class="sd">"</span><span class="s2">Hi, &lt;%= name %&gt;"</span><span class="p">,</span> <span class="p">[</span><span class="ss">name:</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">]</span>
<span class="sd">"</span><span class="s2">Hi, Sean"</span>
</code></pre>
</div>

<h3 id="nh-ngha">Định nghĩa</h3>

<p>Nhanh nhất và được khuyến khích sử dụng, cách dùng EEx này là nhúng một template (tạm dịch: bản mẫu) vào trong một module nên nó được biên dịch. Với EEx ta sẽ cần có template tại thời điểm biên dịch, cùng với các hàm <code class="highlighter-rouge">function_from_string/5</code> và <code class="highlighter-rouge">function_from_file/5</code>.</p>

<p>Ta hãy đưa hàm xuất lời chào sang một tập tin khác và sinh một hàm cho template của chúng ta:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1"># greeting.eex</span>
<span class="no">Hi</span><span class="p">,</span> <span class="o">&lt;%=</span> <span class="n">name</span> <span class="p">%</span><span class="o">&gt;</span>

<span class="k">defmodule</span> <span class="no">Example</span> <span class="k">do</span>
  <span class="kn">require</span> <span class="no">EEx</span>
  <span class="no">EEx</span><span class="o">.</span><span class="n">function_from_file</span> <span class="ss">:def</span><span class="p">,</span> <span class="ss">:greeting</span><span class="p">,</span> <span class="sd">"</span><span class="s2">greeting.eex"</span><span class="p">,</span> <span class="p">[</span><span class="ss">:name</span><span class="p">]</span>
<span class="k">end</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="no">Example</span><span class="o">.</span><span class="n">greeting</span><span class="p">(</span><span class="sd">"</span><span class="s2">Sean"</span><span class="p">)</span>
<span class="sd">"</span><span class="s2">Hi, Sean"</span>
</code></pre>
</div>

<h3 id="bin-dch">Biên dịch</h3>

<p>Cuối cùng, EEx cho chúng ta một cách để sinh cây AST của Elixir từ một string hoặc file dùng <code class="highlighter-rouge">compile_string/2</code> hay <code class="highlighter-rouge">compile_file/2</code>. API này chủ yếu được dùng bởi các API đã đề cập trước đó nhưng chỉ khi bạn muốn cài đặt cách nhúng Elixir của riêng bạn.</p>

<h2 id="tags">Tags</h2>

<p>Mặc định có bốn tag được hỗ trợ trong EEx:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="p">%</span> <span class="n">Bi</span><span class="err">ể</span><span class="n">u</span> <span class="n">th</span><span class="err">ứ</span><span class="n">c</span> <span class="no">Elixir</span> <span class="o">-</span> <span class="n">nh</span><span class="err">ư</span><span class="n">ng</span> <span class="n">s</span><span class="err">ẽ</span> <span class="n">kh</span><span class="err">ô</span><span class="n">ng</span> <span class="n">xu</span><span class="err">ấ</span><span class="n">t</span> <span class="n">k</span><span class="err">ế</span><span class="n">t</span> <span class="n">qu</span><span class="err">ả</span> <span class="n">g</span><span class="err">ì</span> <span class="p">%</span><span class="o">&gt;</span>
<span class="o">&lt;%=</span> <span class="n">Bi</span><span class="err">ể</span><span class="n">u</span> <span class="n">th</span><span class="err">ứ</span><span class="n">c</span> <span class="no">Elixir</span> <span class="o">-</span> <span class="n">s</span><span class="err">ẽ</span> <span class="n">xu</span><span class="err">ấ</span><span class="n">t</span> <span class="n">k</span><span class="err">ế</span><span class="n">t</span> <span class="n">qu</span><span class="err">ả</span> <span class="p">%</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="p">%%</span> <span class="n">Tr</span><span class="err">í</span><span class="n">ch</span> <span class="n">d</span><span class="err">ẫ</span><span class="n">n</span> <span class="n">code</span> <span class="no">Elixir</span> <span class="o">-</span> <span class="n">xu</span><span class="err">ấ</span><span class="n">t</span> <span class="n">n</span><span class="err">ộ</span><span class="n">i</span> <span class="n">dung</span> <span class="n">b</span><span class="err">ê</span><span class="n">n</span> <span class="n">trong</span> <span class="n">tag</span> <span class="p">%</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="p">%</span><span class="c1"># Comment - sẽ bị bỏ qua trong code %&gt;</span>
</code></pre>
</div>

<p>Mọi biểu thực mà bạn muốn xuất quả quả <strong>đều phải</strong> dùng kí hiệu bằng (<code class="highlighter-rouge">=</code>). Chú ý rằng các ngôn ngữ template khác có thể có một cách xử lý riêng với <code class="highlighter-rouge">if</code> nhưng EEx thì không. Không có <code class="highlighter-rouge">=</code> sẽ <strong>không có gì</strong> được xuất ra:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;%=</span> <span class="k">if</span> <span class="no">true</span> <span class="k">do</span> <span class="p">%</span><span class="o">&gt;</span>
  <span class="no">A</span> <span class="n">truthful</span> <span class="n">statement</span>
<span class="o">&lt;</span><span class="p">%</span> <span class="k">else</span> <span class="p">%</span><span class="o">&gt;</span>
  <span class="no">A</span> <span class="no">false</span> <span class="n">statement</span>
<span class="o">&lt;</span><span class="p">%</span> <span class="k">end</span> <span class="p">%</span><span class="o">&gt;</span>
</code></pre>
</div>

<h2 id="engine-b-my">Engine (Bộ máy)</h2>

<p>Mặc định Elixir sử dụng <code class="highlighter-rouge">EEx.SmartEngine</code>, cùng với việc hỗ trợ phép gán (như <code class="highlighter-rouge">@name</code>):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">EEx</span><span class="o">.</span><span class="n">eval_string</span> <span class="sd">"</span><span class="s2">Hi, &lt;%= @name %&gt;"</span><span class="p">,</span> <span class="ss">assigns:</span> <span class="p">[</span><span class="ss">name:</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">]</span>
<span class="sd">"</span><span class="s2">Hi, Sean"</span>
</code></pre>
</div>

<p>Phép gán của bộ <code class="highlighter-rouge">EEx.SmartEngine</code> rất có ích bởi vì các giá trị gán có thể được thay đổi mà không cần biên dịch lại.</p>

<p>Bạn muốn tự viết một engine của riêng bạn? Xem qua behaviour <a href="http://elixir-lang.org/docs/stable/eex/EEx.Engine.html"><code class="highlighter-rouge">EEx.Engine</code></a> để xem các thứ cần thiết.</p>


  

<hr />
<h3 id="social">
  
    Chia sẻ trang này
  
</h3>
<div class="social__container">
  <div class="social__item">
    <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://elixirschool.com/vi/lessons/specifics/eex/&title=Embedded Elixir (EEx)&summary=description&source=https://elixirschool.com" class="social__icon--linkedin"><i class="icon--linkedin"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://twitter.com/intent/tweet?url=https://elixirschool.com/vi/lessons/specifics/eex/&via=elixirschool&text=ElixirSchool: Embedded Elixir (EEx)&hashtags=learnelixir%2Celixirlang&" class="social__icon--twitter"><i class="icon--twitter"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://plus.google.com/share?url=https://elixirschool.com/vi/lessons/specifics/eex/" class="social__icon--googleplus"><i class="icon--googleplus"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://elixirschool.com/vi/lessons/specifics/eex/" class="social__icon--facebook"><i class="icon--facebook"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.pinterest.com/pin/create/link/?url=https://elixirschool.com/vi/lessons/specifics/eex/&media=https://elixirschool.com/assets/fb_share.jpg&description=ElixirSchool: Embedded Elixir (EEx)" class="social__icon--pinterest"><i class="icon--pinterest"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.evernote.com/noteit.action?url=https://elixirschool.com/vi/lessons/specifics/eex/&title=ElixirSchool: Embedded Elixir (EEx)&suggestTags=elixir,programming" class="social__icon--evernote"><i class="icon--evernote"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://vk.com/share.php?url=https://elixirschool.com/vi/lessons/specifics/eex/&title=ElixirSchool: Embedded Elixir (EEx)&description=Check out 'Embedded Elixir (EEx)' on ElixirSchool" class="social__icon--vk" style="margin-left: 2px;"><i class="icon--vk"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="mailto:?&subject=ElixirSchool: Embedded Elixir (EEx)&body=Check out 'Embedded Elixir (EEx)' on ElixirSchool%0D%0A%0D%0Ahttps://elixirschool.com/vi/lessons/specifics/eex/" class="social__icon--email"><i class="icon--email"></i></a>
  </div>
  <div class="social__item">
    <a href="javascript:window.print()" class="social__icon--print"><i class="icon--print"></i></a>
  </div>
</div>
</div>
    </div>
  <script type="text/javascript" src="/assets/app.js"></script>
  </body>
</html>
