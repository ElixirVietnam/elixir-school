<!DOCTYPE html>

<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link href="http://gmpg.org/xfn/11" rel="profile">

  <meta name="description" content="Giáo trình cho ngôn ngữ lập trình Elixir">
  <meta name="author" content="Sean Callan">

  <meta property="og:url" content="https://elixirschool.com/vi/lessons/basics/mix-tasks/">
  <meta property="og:site_name" content="ElixirSchool">
  <meta property="og:title" content="
  Tác vụ Mix tùy biến &middot; Elixir School

">
  <meta property="og:description" content="Giáo trình cho ngôn ngữ lập trình Elixir">
  <meta property="og:image" content="https://elixirschool.com/assets/fb_share.jpg">

  <title>
    
  Tác vụ Mix tùy biến &middot; Elixir School


  </title>

  <!-- CSS -->
  <link type="text/css" rel="stylesheet" href="/assets/app.css">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load("C0p07Sw9j7mZnycKDCgPOAyqJR5hhyoQ");
  analytics.page()
  }}();
  </script>

</head>


  
  <body class="theme-custom-purple ">
    <a id="github_ribbon" href="https://github.com/doomspork/elixir_school"><img src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>

    
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Elixir School
        </a>
      </h1>
      <p class="lead">Giáo trình cho ngôn ngữ lập trình Elixir</p>
    </div>

    <nav class="sidebar-nav">
      
      
        
        
        
        
          <div class="sidebar-nav-group basics">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-down "></i>
              <span>Cơ bản</span>
            </div>
            <div class="sidebar-nav-list" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/vi/lessons/basics/basics/">Cơ bản</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/vi/lessons/basics/collections/">Các tập dữ liệu</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/vi/lessons/basics/enum/">Enum</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/vi/lessons/basics/pattern-matching/">Pattern matching (so trùng mẫu)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/vi/lessons/basics/control-structures/">Cấu trúc điều khiển</a>
                </div>
              
                <div class="sidebar-nav-item">
                  6. <a class="sidebar-lesson " href="/vi/lessons/basics/functions/">Hàm</a>
                </div>
              
                <div class="sidebar-nav-item">
                  7. <a class="sidebar-lesson " href="/vi/lessons/basics/pipe-operator/">Pipe Operator</a>
                </div>
              
                <div class="sidebar-nav-item">
                  8. <a class="sidebar-lesson " href="/vi/lessons/basics/modules/">Modules</a>
                </div>
              
                <div class="sidebar-nav-item">
                  9. <a class="sidebar-lesson " href="/vi/lessons/basics/mix/">Mix</a>
                </div>
              
                <div class="sidebar-nav-item">
                  10. <a class="sidebar-lesson " href="/vi/lessons/basics/sigils/">Sigils</a>
                </div>
              
                <div class="sidebar-nav-item">
                  11. <a class="sidebar-lesson " href="/vi/lessons/basics/documentation/">Documentation</a>
                </div>
              
                <div class="sidebar-nav-item">
                  12. <a class="sidebar-lesson " href="/vi/lessons/basics/testing/">Testing</a>
                </div>
              
                <div class="sidebar-nav-item">
                  13. <a class="sidebar-lesson " href="/vi/lessons/basics/comprehensions/">Comprehensions</a>
                </div>
              
                <div class="sidebar-nav-item">
                  14. <a class="sidebar-lesson " href="/vi/lessons/basics/strings/">Strings</a>
                </div>
              
                <div class="sidebar-nav-item">
                  15. <a class="sidebar-lesson  active" href="/vi/lessons/basics/mix-tasks/">Tác vụ Mix tùy biến</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group advanced">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Nâng cao</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/vi/lessons/advanced/erlang/">Erlang Interoperability</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/vi/lessons/advanced/error-handling/">Xử Lý Lỗi</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/vi/lessons/advanced/escripts/">File thực thi</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/vi/lessons/advanced/concurrency/">Xử lý đồng thời</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/vi/lessons/advanced/otp-concurrency/">OTP Concurrency</a>
                </div>
              
                <div class="sidebar-nav-item">
                  6. <a class="sidebar-lesson " href="/vi/lessons/advanced/otp-supervisors/">OTP Supervisors</a>
                </div>
              
                <div class="sidebar-nav-item">
                  7. <a class="sidebar-lesson " href="/vi/lessons/advanced/metaprogramming/">Metaprogramming</a>
                </div>
              
                <div class="sidebar-nav-item">
                  8. <a class="sidebar-lesson " href="/vi/lessons/advanced/umbrella-projects/">Các dự án ô</a>
                </div>
              
                <div class="sidebar-nav-item">
                  9. <a class="sidebar-lesson " href="/vi/lessons/advanced/typespec/">Đặc tả và kiểu</a>
                </div>
              
                <div class="sidebar-nav-item">
                  10. <a class="sidebar-lesson " href="/vi/lessons/advanced/behaviours/">Behaviours</a>
                </div>
              
                <div class="sidebar-nav-item">
                  11. <a class="sidebar-lesson " href="/vi/lessons/advanced/gen-stage/">GenStage</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group specifics">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Cụ thể</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/vi/lessons/specifics/plug/">Plug</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/vi/lessons/specifics/ecto/">Ecto</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/vi/lessons/specifics/eex/">Embedded Elixir (EEx)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/vi/lessons/specifics/ets/">Erlang Term Storage (ETS)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/vi/lessons/specifics/mnesia/">Mnesia</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group libraries">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Thư viện</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/vi/lessons/libraries/poolboy/">Poolboy</a>
                </div>
              
            </div>
          </div>
        
      
    </nav>

    <p>
      

      
        <a href=" /lessons/basics/mix-tasks/ ">en</a>
      
        <a href=" /jp/lessons/basics/mix-tasks/ ">jp</a>
      
        <a href=" /cn/lessons/basics/mix-tasks/ ">cn</a>
      
        <a href=" /es/lessons/basics/mix-tasks/ ">es</a>
      
        <a href=" /pt/lessons/basics/mix-tasks/ ">pt</a>
      
        <a href=" /vi/lessons/basics/mix-tasks/ ">vi</a>
      
        <a href=" /ru/lessons/basics/mix-tasks/ ">ru</a>
      
        <a href=" /sk/lessons/basics/mix-tasks/ ">sk</a>
      
        <a href=" /fr/lessons/basics/mix-tasks/ ">fr</a>
      
        <a href=" /gr/lessons/basics/mix-tasks/ ">gr</a>
      
        <a href=" /it/lessons/basics/mix-tasks/ ">it</a>
      
        <a href=" /pl/lessons/basics/mix-tasks/ ">pl</a>
      
        <a href=" /my/lessons/basics/mix-tasks/ ">my</a>
      
        <a href=" /no/lessons/basics/mix-tasks/ ">no</a>
      
        <a href=" /ko/lessons/basics/mix-tasks/ ">ko</a>
      
        <a href=" /id/lessons/basics/mix-tasks/ ">id</a>
      
        <a href=" /uk/lessons/basics/mix-tasks/ ">uk</a>
      
        <a href=" /tr/lessons/basics/mix-tasks/ ">tr</a>
      
        <a href=" /bg/lessons/basics/mix-tasks/ ">bg</a>
      
        <a href=" /de/lessons/basics/mix-tasks/ ">de</a>
      
        <a href=" /bn/lessons/basics/mix-tasks/ ">bn</a>
      
    </p>

    <p>&copy; 2017 <a href="https://github.com/doomspork">Sean Callan</a></p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Tác vụ Mix tùy biến</h1>
  <p>Tạo ra một tác vụ tùy biến cho dự án Elixir của bạn.</p>

<h2>Mục lục</h2>
<div id="toc"></div>

<h2 id="gii-thiu">Giới thiệu</h2>

<p>Sẽ không có gì là lạ nếu bạn muốn mở rộng ứng dụng Elixir bằng cách thêm một số tác vụ Mix. Trước khi học cách tạo ra một tác vụ Mix cụ thể, ta hãy xem qua những tác vụ có sẵn:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mix phoenix.new my_phoenix_app

<span class="k">*</span> creating my_phoenix_app/config/config.exs
<span class="k">*</span> creating my_phoenix_app/config/dev.exs
<span class="k">*</span> creating my_phoenix_app/config/prod.exs
<span class="k">*</span> creating my_phoenix_app/config/prod.secret.exs
<span class="k">*</span> creating my_phoenix_app/config/test.exs
<span class="k">*</span> creating my_phoenix_app/lib/my_phoenix_app.ex
<span class="k">*</span> creating my_phoenix_app/lib/my_phoenix_app/endpoint.ex
<span class="k">*</span> creating my_phoenix_app/test/views/error_view_test.exs
...
</code></pre>
</div>

<p>Như ở trên, Phoenix Framework cung cấp một tác vụ Mix để sinh dự án mới. Ồ vậy thì chúng ta có thể tự tạo cái gì đó tương tự cho dự án của chúng ta không nhỉ? Vâng câu trả lời là được, mà còn dễ như bỡn nữa là đằng khác.</p>

<h2 id="setup">Setup</h2>

<p>Chúng ta hãy dựng một ứng dụng Mix đơn giản.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mix new hello

<span class="k">*</span> creating README.md
<span class="k">*</span> creating .gitignore
<span class="k">*</span> creating mix.exs
<span class="k">*</span> creating config
<span class="k">*</span> creating config/config.exs
<span class="k">*</span> creating lib
<span class="k">*</span> creating lib/hello.ex
<span class="k">*</span> creating <span class="nb">test</span>
<span class="k">*</span> creating <span class="nb">test</span>/test_helper.exs
<span class="k">*</span> creating <span class="nb">test</span>/hello_test.exs

Your Mix project was created successfully.
You can use <span class="s2">"mix"</span> to compile it, <span class="nb">test </span>it, and more:

<span class="nb">cd </span>hello
mix <span class="nb">test

</span>Run <span class="s2">"mix help"</span> <span class="k">for </span>more commands.
</code></pre>
</div>

<p>Bây giờ trong file <strong>lib/hello.ex</strong> mà Mix sinh ra cho chúng ta, hãy viết một hàm đơn giản để xuất ra “Hello, World!”.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Hello</span> <span class="k">do</span>

  <span class="nv">@doc</span> <span class="sd">"""
  Output's `Hello, World!` everytime.
  """</span>
  <span class="k">def</span> <span class="n">say</span> <span class="k">do</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="sd">"</span><span class="s2">Hello, World!"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<h2 id="tc-v-mix-ty-bin">Tác vụ Mix tùy biến</h2>

<p>Giờ thì ta tiến hành tạo tác vụ Mix của chính chúng ta nào. Hãy tạo mới một thư mục và file <strong>hello/lib/mix/tasks/hello.ex</strong>. Trong file này, hãy thêm vào 7 dòng code Elixir.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Mix</span><span class="o">.</span><span class="no">Tasks</span><span class="o">.</span><span class="no">Hello</span> <span class="k">do</span>
  <span class="kn">use</span> <span class="no">Mix</span><span class="o">.</span><span class="no">Task</span>

  <span class="nv">@shortdoc</span> <span class="sd">"</span><span class="s2">Simply runs the Hello.say/0 command."</span>
  <span class="k">def</span> <span class="n">run</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">do</span>
    <span class="no">Hello</span><span class="o">.</span><span class="n">say</span> <span class="c1"># calling our Hello.say() function from earlier</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Chú ý rằng defmodule bắt đầu với <code class="highlighter-rouge">Mix.Tasks</code> và tên mà chúng ta muốn gọi từ command line. Ở dòng thử hai, <code class="highlighter-rouge">use Mix.Task</code> sẽ cho chúng ta các tính năng của <code class="highlighter-rouge">Mix.Task</code>. Sau đó khai báo một hàm run mà ta tạm thời bỏ qua các tham số. Trong hàm này, ta gọi module <code class="highlighter-rouge">Hello</code> cùng với hàm <code class="highlighter-rouge">say</code>.</p>

<h2 id="chy-tc-v-mix">Chạy tác vụ Mix</h2>

<p>Ta hãy thử kiểm tra mix task vừa được tạo. Nó sẽ chạy ngon lành chỉ cần ta đứng trong thư mục. Từ command line, chạy lệnh <code class="highlighter-rouge">mix hello</code>, và ta sẽ thấy kết quả như sau:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mix hello
Hello, World!
</code></pre>
</div>

<p>Mix khá là thân thiện. Nó biết rằng ai thì cũng sẽ có lúc viết sai chính tả, nên nó dùng một kĩ thuật gọi là fuzzy string matching (tạm dịch: so trùng các chuỗi gần nhau) để gợi ý.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mix hell
<span class="k">**</span> <span class="o">(</span>Mix<span class="o">)</span> The task <span class="s2">"hell"</span> could not be found. Did you mean <span class="s2">"hello"</span>?
</code></pre>
</div>

<p>Bạn có để ý là chúng ta vừa giới thiệu một thuộc tính module mới là <code class="highlighter-rouge">@shortdoc</code>? Nó sẽ có ích khi ta đưa ứng dụng ra sử dụng, như khi user chạy lệnh <code class="highlighter-rouge">mix help</code> từ terminal.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mix <span class="nb">help

</span>mix app.start         <span class="c"># Starts all registered apps</span>
...
mix hello             <span class="c"># Simply calls the Hello.say/0 function.</span>
...
</code></pre>
</div>


  

<hr />
<h3 id="social">
  
    Chia sẻ trang này
  
</h3>
<div class="social__container">
  <div class="social__item">
    <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://elixirschool.com/vi/lessons/basics/mix-tasks/&title=Tác vụ Mix tùy biến&summary=description&source=https://elixirschool.com" class="social__icon--linkedin"><i class="icon--linkedin"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://twitter.com/intent/tweet?url=https://elixirschool.com/vi/lessons/basics/mix-tasks/&via=elixirschool&text=ElixirSchool: Tác vụ Mix tùy biến&hashtags=learnelixir%2Celixirlang&" class="social__icon--twitter"><i class="icon--twitter"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://plus.google.com/share?url=https://elixirschool.com/vi/lessons/basics/mix-tasks/" class="social__icon--googleplus"><i class="icon--googleplus"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://elixirschool.com/vi/lessons/basics/mix-tasks/" class="social__icon--facebook"><i class="icon--facebook"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.pinterest.com/pin/create/link/?url=https://elixirschool.com/vi/lessons/basics/mix-tasks/&media=https://elixirschool.com/assets/fb_share.jpg&description=ElixirSchool: Tác vụ Mix tùy biến" class="social__icon--pinterest"><i class="icon--pinterest"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.evernote.com/noteit.action?url=https://elixirschool.com/vi/lessons/basics/mix-tasks/&title=ElixirSchool: Tác vụ Mix tùy biến&suggestTags=elixir,programming" class="social__icon--evernote"><i class="icon--evernote"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://vk.com/share.php?url=https://elixirschool.com/vi/lessons/basics/mix-tasks/&title=ElixirSchool: Tác vụ Mix tùy biến&description=Check out 'Tác vụ Mix tùy biến' on ElixirSchool" class="social__icon--vk" style="margin-left: 2px;"><i class="icon--vk"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="mailto:?&subject=ElixirSchool: Tác vụ Mix tùy biến&body=Check out 'Tác vụ Mix tùy biến' on ElixirSchool%0D%0A%0D%0Ahttps://elixirschool.com/vi/lessons/basics/mix-tasks/" class="social__icon--email"><i class="icon--email"></i></a>
  </div>
  <div class="social__item">
    <a href="javascript:window.print()" class="social__icon--print"><i class="icon--print"></i></a>
  </div>
</div>
</div>
    </div>
  <script type="text/javascript" src="/assets/app.js"></script>
  </body>
</html>
